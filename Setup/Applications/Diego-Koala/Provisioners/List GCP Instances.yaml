harnessApiVersion: '1.0'
type: SHELL_SCRIPT
scriptBody: |
  curl https://storage.googleapis.com/oauth2l/latest/linux_amd64.tgz > linux_amd64.tar.gz
  tar -xzvf linux_amd64.tar.gz

  ./linux_amd64/oauth2l curl --credentials $credential_file --scope cloud-platform --url https://compute.googleapis.com/compute/v1/projects/$project/zones/$zone/instances > "$PROVISIONER_OUTPUT_PATH"
variables:
- name: credential_file
  valueType: ENCRYPTED_TEXT
- name: project
  valueType: TEXT
- name: zone
  valueType: TEXT
